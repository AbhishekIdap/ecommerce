<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Dashboard | NAMELESS STORE</title>

    <style>
        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: "Segoe UI", system-ui, sans-serif;
            background: linear-gradient(135deg, #ffe7f3, #f3e6ff, #e7f3ff);
            color: #3d3150;
            overflow-x: hidden;
        }

        /* soft blobs */
        .blob {
            position: fixed;
            border-radius: 50%;
            filter: blur(150px);
            opacity: 0.55;
            z-index: 0;
        }
        .blob.left {
            width: 500px; height: 500px;
            background: radial-gradient(circle, #ffc4ec 0%, #eac7ff 40%, #c2d9ff 75%);
            top: -150px; left: -130px;
        }
        .blob.right {
            width: 450px; height: 450px;
            background: radial-gradient(circle, #b7f3ff 0%, #c7f3ff 35%, #b5d9ff 75%);
            bottom: -150px; right: -130px;
        }

        /* NAVBAR */
        .navbar {
            width: 100%;
            height: 70px;
            background: linear-gradient(90deg, #ffb4d4, #e7c5ff, #c4d4ff, #a8e8ff);
            backdrop-filter: blur(18px);
            border-bottom: 1px solid rgba(255,255,255,0.7);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 40px;
            position: sticky;
            top: 0;
            z-index: 10;
            box-shadow: 0 8px 22px rgba(170, 130, 210, 0.35);
        }

        .logo {
            font-size: 26px;
            font-weight: 800;
            color: #231433;
        }

        .search-box {
            width: 45%;
            padding: 12px 16px;
            border-radius: 999px;
            border: 1px solid rgba(230, 198, 239, 0.9);
            outline: none;
            background: rgba(255,255,255,0.95);
            color: #3d3150;
            box-shadow: 0 4px 12px rgba(180,140,220,0.2);
        }

        .nav-buttons { display: flex; gap: 15px; }

        .nav-btn {
            background: #ffffff;
            padding: 8px 18px;
            border-radius: 800px;
            border: 1px solid rgba(230, 198, 239, 0.9);
            cursor: pointer;
            color: #27163e;
            font-weight: 600;
            box-shadow: 0 6px 16px rgba(160,120,210,0.35);
            text-decoration: none;
        }
        .nav-btn:hover { background: #fff7ff; }

        /* SEARCH RESULTS DROPDOWN */
        #searchResults {
            position: absolute;
            top: 70px;
            left: 28%;
            width: 45%;
            background: white;
            border-radius: 18px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            display: none;
            padding: 10px;
            z-index: 999;
        }

        .search-item {
            padding: 10px 14px;
            cursor: pointer;
            border-radius: 12px;
            transition: 0.2s;
        }

        .search-item:hover {
            background: #f3e6ff;
        }

        /* DASHBOARD GRID */
        .dashboard-grid {
            display: grid;
            grid-template-columns: 250px 1fr 240px;
            gap: 25px;
            margin: 30px auto;
            width: 100%;
            max-width: 1600px;
            position: relative;
            z-index: 5;
        }
        .side-menu a {
    text-decoration: none;
    color: #6d568a;
    display: block;  /* <-- THIS WAS MISSING IN YOUR CURRENT CODE */
}
        

        .side-menu {
            background: rgba(255,255,255,0.85);
            padding: 20px;
            border-radius: 20px;
            border: 1px solid rgba(232, 202, 244, 0.9);
            backdrop-filter: blur(15px);
            box-shadow: 0 8px 22px rgba(180,140,220,0.25);
        }

        .side-title { font-size: 20px; margin-bottom: 12px; color: #311842; font-weight: 600; }
        .menu-item { padding: 10px 5px; font-size: 16px; cursor: pointer; color: #6d568a; transition: 0.2s; }
        .menu-item:hover { color: #ff7ad2; transform: translateX(3px); }

        .main-content { width: 100%; }

        .banner {
            width: 100%;
            height: 250px;
            border-radius: 20px;
            background: linear-gradient(135deg, #ffd8f5aa, #cce4ffaa);
            border: 1px solid rgba(232, 202, 244, 0.9);
            backdrop-filter: blur(14px);
            box-shadow: 0 10px 26px rgba(160,120,210,0.3);
        }
        /* ===== SLIDER ADDITION ===== */
.slides {
    display: flex;
    height: 100%;
    transition: transform 0.8s ease-in-out;
}

.slide {
    min-width: 100%;
    height: 100%;
    position: relative;
}

.slide img {
    width: 100%;
    height: 250px;
    object-fit: cover;
    border-radius: 20px;
}

.slide-info {
    position: absolute;
    bottom: 20px;
    left: 30px;
    background: rgba(0,0,0,0.55);
    padding: 15px 25px;
    border-radius: 12px;
    color: white;
}
/* ===== SLIDER FIX ===== */
.banner {
    position: relative;
    overflow: hidden;   /* prevents image overflow */
}

.slide img {
    width: 100%;
    height: 100%;
    object-fit: cover;   /* keeps image inside box properly */
    border-radius: 20px;
}

        .section-title { font-size: 22px; margin: 25px 0 15px; color: #3a214f; font-weight: 700; }

        .scroll-row {
            display: flex;
            overflow-x: auto;
            gap: 20px;
            padding-bottom: 10px;
        }

        .item-card {
            min-width: 180px;
            height: 200px;
            border-radius: 16px;
            background: rgba(255,255,255,0.9);
            border: 1px solid rgba(232, 202, 244, 0.9);
            backdrop-filter: blur(18px);
            padding: 20px;
            flex-shrink: 0;
            box-shadow: 0 12px 26px rgba(150,110,200,0.25);
        }

        .right-panel { display: flex; flex-direction: column; gap: 20px; }

        .feature-card {
            height: 150px;
            padding: 20px;
            border-radius: 18px;
            background: rgba(255,255,255,0.9);
            border: 1px solid rgba(232, 202, 244, 0.9);
            backdrop-filter: blur(14px);
            text-align: center;
            box-shadow: 0 10px 26px rgba(160,120,210,0.3);
            cursor: pointer;
            transition: 0.2s;
        }
        .feature-card:hover { transform: translateY(-4px) scale(1.02); }

    </style>
</head>

<body>

<div class="blob left"></div>
<div class="blob right"></div>

<!-- NAVBAR -->
<div class="navbar">
    <div class="logo">NAMELESS STORE ğŸŒŒ</div>

    <input id="searchInput" class="search-box" placeholder="Search cosmic products...">

    <!-- ğŸ”¥ SEARCH DROPDOWN -->
    <div id="searchResults"></div>

    <div class="nav-buttons">
        <a href="/login" class="nav-btn">ğŸ” Login</a>
        <a href="/cart" class="nav-btn">ğŸ›’ Cart</a>
        <a href="/profile" class="nav-btn">ğŸ‘¤ Profile</a>
    </div>
</div>

<!-- MAIN GRID -->
<div class="dashboard-grid">

    <!-- LEFT MENU -->
    <div class="side-menu">
        <div class="side-title">Quick Access</div>
        <a href="/products" class="menu-item">ğŸ› Browse Products</a>
        <a href="/cart" class="menu-item">ğŸ›’ My Cart</a>
        <a href="/cart/orders" class="menu-item">ğŸ“¦ Orders</a>
        <a href="/profile" class="menu-item">ğŸ‘¤ My Profile</a>

        <br>
        <div class="side-title">Categories</div>
        <div class="menu-item">âš¡ Electronics</div>
        <div class="menu-item">ğŸ‘• Fashion</div>
        <div class="menu-item">ğŸ  Home & Furniture</div>
        <div class="menu-item">ğŸ® Gaming</div>
        <div class="menu-item">ğŸ“š Books</div>
        <div class="menu-item">ğŸ’„ Beauty</div>
        <div class="menu-item">ğŸ‹ Fitness</div>
    </div>

    <!-- CENTER -->
    <div class="main-content">

       <div class="banner">
    <div class="slides">
        <div class="slide"
             th:each="product, stat : ${products}"
             th:if="${stat.index < 5}">
            <a th:href="@{'/product/' + ${product.id}}">
               <img th:src="${product.imageUrl}">
                <div class="slide-info">
                    <h2 th:text="${product.name}"></h2>
                    <p>â‚¹ <span th:text="${product.price}"></span></p>
                </div>
            </a>
        </div>
    </div>
</div>

        <div class="section-title">ğŸ”¥ Top Cosmic Deals</div>
       <div class="scroll-row">
    <div class="item-card"
         th:each="p, stat : ${products}"
         th:if="${stat.index < 5}">
         

        <img th:src="${p.imageUrl}"
             style="width:100%; height:120px; object-fit:cover; border-radius:12px;">

        <div style="margin-top:8px; font-weight:600;"
             th:text="${p.name}"></div>

        <div style="font-size:13px; color:#666;"
             th:text="'â‚¹ ' + ${p.price}"></div>
    </div>
</div>

        <div class="section-title">âœ¨ New Arrivals</div>
        <div class="scroll-row">
    <div class="item-card"
         th:each="p, stat : ${products}"
         th:if="${stat.index >= 5 && stat.index < 9}">

        <img th:src="${p.imageUrl}"
             style="width:100%; height:120px; object-fit:cover; border-radius:12px;">

        <div style="margin-top:8px; font-weight:600;"
             th:text="${p.name}"></div>

        <div style="font-size:13px; color:#666;"
             th:text="'â‚¹ ' + ${p.price}"></div>
    </div>
</div>

        <div class="section-title">ğŸ’œ Recommended for You</div>
        <div class="scroll-row">
    <div class="item-card"
         th:each="p, stat : ${products}"
         th:if="${stat.index >= 9}">

        <img th:src="${p.imageUrl}"
             style="width:100%; height:120px; object-fit:cover; border-radius:12px;">

        <div style="margin-top:8px; font-weight:600;"
             th:text="${p.name}"></div>

        <div style="font-size:13px; color:#666;"
             th:text="'â‚¹ ' + ${p.price}"></div>
    </div>
</div>

    </div>

    <!-- RIGHT PANEL -->
    <div class="right-panel">
        <div class="feature-card"><div class="feature-title">â­ Wishlist</div><div class="feature-desc">Save your favourites</div></div>
        <div class="feature-card"><div class="feature-title">ğŸ Offers</div><div class="feature-desc">Cosmic discounts</div></div>
        <div class="feature-card"><div class="feature-title">ğŸ”” Notifications</div><div class="feature-desc">Updates for you</div></div>
        <div class="feature-card"><div class="feature-title">âš™ Settings</div><div class="feature-desc">Manage your account</div></div>
        <div class="feature-card"><div class="feature-title">ğŸ’³ Transactions</div><div class="feature-desc">Your history</div></div>
    </div>

</div>

<!-- ========== LIVE SEARCH SCRIPT ========== -->
<script>
/* ===== AUTO SLIDER ===== */
let currentSlide = 0;

function autoSlide() {
    const slides = document.querySelector(".slides");
    const total = document.querySelectorAll(".slide").length;

    if (!slides || total === 0) return;

    currentSlide++;
    if (currentSlide >= total) currentSlide = 0;

    slides.style.transform = `translateX(-${currentSlide * 100}%)`;
}

setInterval(autoSlide, 3000);
const input = document.getElementById("searchInput");
const box = document.getElementById("searchResults");

input.addEventListener("keyup", () => {
    const q = input.value.trim();

    if (q.length === 0) {
        box.style.display = "none";
        box.innerHTML = "";
        return;
    }

    fetch(`/search?query=${encodeURIComponent(q)}`)
        .then(res => res.json())
        .then(data => {
            if (data.length === 0) {
                box.style.display = "none";
                box.innerHTML = "";
                return;
            }

            let html = "";
            data.forEach(p => {
                html += `
                    <div class="search-item" onclick="window.location='/product/${p.id}'">
                        ${p.name} â€” â‚¹${p.price}
                    </div>
                `;
            });

            box.innerHTML = html;
            box.style.display = "block";
        });
});

// Hide dropdown when clicking outside
document.addEventListener("click", (e) => {
    if (!input.contains(e.target)) {
        box.style.display = "none";
    }
});
</script>

</body>
</html>
